<script aria-label="component-maker-js.html">

    let version = "1.0.20230527"

    class ComponentConfiguration {
        /** @type{} */
        #propMap = new Map()
    }
    class ComponentData {
        data = {}
        /** @type {Map<string, PropertyDescriptor | undefined} */
        props = new Map()
        /** @type {Map<string, [string]>} */
        dependentPropList = new Map()
        /** @type {Map<string, string>} */
        bindings = new Map()
        /** @type {HTMLElement} */
        myElement = null
        /** @type {ShadowRoot} */
        myShadowRoot

        /** 
         * @param {{me: HTMLElement, root: ShadowRoot}} c
        */
        constructor(c){
            let {me, root} = c
            this.myElement = me
            this.myShadowRoot = root
            initiateMyElement()
        }

        

        setData() { }
        addProps() { }



    }
    class ComponentUIHandler {
        #shadowRoot
        #me


    }
    class ComponentMaker {
        static get version() { return version }
        static make() {

            let lcc = class extends HTMLElement {
                #dataHandler


                constructor() {
                    super()
                    this.attachShadow({mode: "open"})
                    this.#dataHandler = new ComponentData({me: this, root: this.shadowRoot})
                }

                set data(v) {
                    this.#dataHandler.data = v
                }
                //get props() { return this.#props }


                /** @param {{derived:boolean}} options */
                listProps(options) {
                    let { derived } = options
                    if (derived) return [...new Set([...this.#dataHandler.derivedProps.values()].flatMap(f => f))]
                    return [...this.#dataHandler.props.keys()]
                }
                /** 
                 * @desc {$prop1 : "data1.data2.leaf1", $prop2 : "data1.data2.leaf2"}
                 * @param {any} bindings - 
                */
                updateBindings(bindings) {

                }

            }
        }
    }

</script>